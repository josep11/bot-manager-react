{"version":3,"sources":["utils/utils.js","utils/botutils.js","components/apiWrapper.js","components/list.js","App.js","utils/reactUtils.js","reportWebVitals.js","index.js"],"names":["dateToRelativeDate","date","DateTime","Error","isValid","setLocale","toRelativeCalendar","parseDateTime","fromISO","orderBots","APIData","botNames","newAPIData","botName","bot","name","push","baseURL","url","encodeURIComponent","getBotNames","a","fetch","method","headers","resp","ok","console","error","json","data","botList","getLastRenewed","pk","status","createPk","keyword","ListTable","useState","setAPIData","spinnerLoading","setSpinnerLoading","useEffect","filter","e","startsWith","pks","map","total_bots","length","num_req_finished","substring","log","toLocaleString","DATETIME_SHORT","fetchAPI","style","textAlign","type","color","height","width","visible","Table","celled","className","Header","Row","HeaderCell","item","i","Body","Cell","Footer","colSpan","Menu","floated","pagination","Item","as","icon","Icon","App","title","prevTitle","document","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.00ae99c5.chunk.js","sourcesContent":["import { DateTime } from 'luxon';\n\n/**\n * \n * @param {DateTime} date \n * @returns {string} relative date expressed like \"ahir\"\n */\nexport function dateToRelativeDate(date) {\n    if (!date) { return null }\n    if (!(date instanceof DateTime)) {\n        throw new Error(\"parameter is not of DateTime type\");\n    }\n    if (!date.isValid) {\n        throw new Error(`date \"${date}\" is not a valid DateTime`);\n    }\n    return date.setLocale('ca').toRelativeCalendar()\n}\n\nexport function parseDateTime(date) {\n    if (typeof date !== \"string\") {\n        throw Error('Input parameter date is not string');\n    }\n    return DateTime.fromISO(date);\n}\n\nexport function isDev() {\n    return !process.env.NODE_ENV || process.env.NODE_ENV === 'development';\n}","\nexport const orderBots = (APIData, botNames) => {\n    const newAPIData = []\n    for (const botName of botNames) {\n        for (const bot of APIData) {\n            if (botName === bot.name) {\n                newAPIData.push(bot);\n                continue;\n            }\n        }\n    }\n    return newAPIData\n}\n\n","export const baseURL = 'https://zi9bgvb5e3.execute-api.eu-west-3.amazonaws.com/Prod/';\n\n// const { REACT_APP_API_AUTHORIZATION } = process.env;\n\nconst pk = \"BOT#BMR\";\nconst url = `${baseURL}${encodeURIComponent(pk)}`;\n\nexport const getBotNames = async () => {\n    // console.log(`REACT_APP_API_AUTHORIZATION = ${REACT_APP_API_AUTHORIZATION}`);\n\n    const resp = await fetch(url, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            // AuthorizationToken: REACT_APP_API_AUTHORIZATION,\n        }\n    });\n    if (!resp.ok) {\n        console.error(resp);\n        throw new Error('Error with request: ' + url);\n    }\n    const data = await resp.json()\n    if (data.data && data.data && data.data.botList) {\n        return data.data.botList;\n    }\n    return [];\n}\n\nexport const getLastRenewed = async (pk) => {\n    let url = `${baseURL}${encodeURIComponent(pk)}`;\n\n    // if (num_req_finished === 1 || num_req_finished === 2) { url += '4' }\n    const resp = await fetch(url, {\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' }\n    });\n\n    if (!resp.ok) {\n        console.error('Error with request on pk: ' + pk);\n        \n        console.error(resp);\n        if (resp.status === 404){\n            return {\n                pk\n            }\n        }\n        return null;\n    }\n\n    return await resp.json();\n}\n","import React, { useState, useEffect } from 'react'\nimport { Icon, Menu, Table } from 'semantic-ui-react'\nimport { dateToRelativeDate, isDev, parseDateTime } from '../utils/utils';\nimport { orderBots } from '../utils/botutils';\nimport { getBotNames, getLastRenewed } from './apiWrapper';\nimport Loader from 'react-loader-spinner';\nimport { DateTime } from 'luxon';\n\nconst createPk = (keyword) => `LR#${keyword}`;\n// const createSk = dateFormatted => `#DATE#${dateFormatted}`;\n\nfunction ListTable() {\n\n    const [APIData, setAPIData] = useState([]);\n    const [spinnerLoading, setSpinnerLoading] = useState(true);\n\n    useEffect(() => {\n        async function fetchAPI() {\n            let botNames = await getBotNames();\n            if (isDev()) {\n                console.log('dev');\n                botNames = botNames.slice(2, 4);\n            }\n            // Commented out bot names start with \"#\"\n            botNames = botNames.filter(e => !e.startsWith(\"#\"));\n            const pks = botNames.map(e => createPk(e))\n            const total_bots = botNames.length;\n            let num_req_finished = 0;\n            for (const pk of pks) {\n\n                const data = await getLastRenewed(pk);\n\n                num_req_finished++;\n\n                if (!data) { continue; }\n\n                data.name = data.pk.substring(3);\n                data.date = parseDateTime(data.date);\n                console.log(`${data.name}: ${data.date.toLocaleString(DateTime.DATETIME_SHORT)}`);\n                data.date = dateToRelativeDate(data.date);\n                setAPIData(APIData => [...APIData, data]);\n\n                setAPIData(APIData => orderBots(APIData, botNames))\n                if (num_req_finished === total_bots) {\n                    setSpinnerLoading(false);\n                }\n            }\n        }\n\n        fetchAPI();\n\n    }, [setAPIData])\n    return (\n        <div style={{ textAlign: \"center\" }} >\n\n            <Loader\n                // textAlign=\"center\"\n                type=\"TailSpin\"\n                color=\"#00BFFF\"\n                height={50}\n                width={50}\n                visible={spinnerLoading}\n            />\n\n            <Table celled className=\"list-table\">\n                <Table.Header>\n                    <Table.Row>\n                        <Table.HeaderCell>Nom del Bot</Table.HeaderCell>\n                        <Table.HeaderCell textAlign='right'>Ãšltim Renovat</Table.HeaderCell>\n                    </Table.Row>\n                </Table.Header>\n\n                {APIData && APIData.map((item, i) => (\n                    < Table.Body key={i}>\n                        <Table.Row>\n                            <Table.Cell>{item.name}</Table.Cell>\n                            <Table.Cell textAlign='right'>{item.date}</Table.Cell>\n                        </Table.Row>\n                    </Table.Body>\n\n                ))}\n\n                <Table.Footer>\n                    <Table.Row>\n                        <Table.HeaderCell colSpan='3'>\n                            <Menu floated='right' pagination>\n                                <Menu.Item as='a' icon>\n                                    <Icon name='chevron left' />\n                                </Menu.Item>\n                                <Menu.Item as='a'>1</Menu.Item>\n                                <Menu.Item as='a'>2</Menu.Item>\n                                <Menu.Item as='a'>3</Menu.Item>\n                                <Menu.Item as='a'>4</Menu.Item>\n                                <Menu.Item as='a' icon>\n                                    <Icon name='chevron right' />\n                                </Menu.Item>\n                            </Menu>\n                        </Table.HeaderCell>\n                    </Table.Row>\n                </Table.Footer>\n            </Table >\n        </div >\n\n    )\n}\n\nexport default ListTable\n","import './App.css';\nimport ListTable from \"./components/list\";\nimport { useTitle } from './utils/reactUtils';\n\nfunction App() {\n  useTitle('Bot Manager');\n  return (\n    <div className=\"main\">\n      <h2 className=\"main-header\">Bot Manager Pro</h2>\n      <div>\n        <ListTable />\n      </div>\n\n    </div>\n  );\n}\n\nexport default App;\n","import { useEffect } from 'react';\n\nexport function useTitle(title) {\n    useEffect(() => {\n        const prevTitle = document.title\n        document.title = title\n        return () => {\n            document.title = prevTitle\n        }\n    })\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'semantic-ui-css/semantic.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}